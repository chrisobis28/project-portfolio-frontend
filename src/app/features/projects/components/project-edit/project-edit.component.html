<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="grid">
      <div class="col-1"></div>
      <div class="col-10">
        <div class="introduction">
          <h1 id="title">Edit project page:</h1>
          <p id="subtitle">Edit your project with respect to the template*.</p>
        </div>
        <div class="card flex justify-content-start ">
          <p-floatLabel id="templatecomponent" class="min-w-screen">
            <p-dropdown
              [options]="templateNames"
              [(ngModel)]="selectedTemplateName"
              [showClear]="true"
              inputId="float-label"
              (onClear)="removeTemplate()"
            />
            <label for="float-label">Select a Template</label>
          </p-floatLabel>
        </div>
        <div>
          <p-floatLabel>
            <input
              pInputText
              id="projecttitle"
              [(ngModel)]="title"
              style="width: 81vw"
            />
            <label for="username">Project Title</label>
          </p-floatLabel>
        </div>
        <div class="card flex justify-content-start min-w-full">
          <p-floatLabel>
            <textarea
              id="float-input"
              rows="5"
              pInputTextarea
              style="width: 81vw"
              [(ngModel)]="description"
              [autoResize]="true"
            >
            </textarea>
            <label for="float-input">Description</label>
          </p-floatLabel>
        </div>
        <div class="card p-fluid">
          <p-floatLabel>
            <p-chips id="chips" [(ngModel)]="tagnames">
              <ng-template let-item pTemplate="item">
                {{ item }} - (Tag) <i class="pi pi-user ml-2"></i>
              </ng-template>
            </p-chips>
            <label for="chips">Tags</label>
          </p-floatLabel>
        </div>
        <div class="card p-fluid">
          <p-floatLabel>
            <p-chips id="chips" [(ngModel)]="collaboratornames" separator=",">
              <ng-template let-item pTemplate="item">
                {{ item }} - (User) <i class="pi pi-user ml-2"></i>
              </ng-template>
            </p-chips>
            <label for="chips">Colaborators</label>
          </p-floatLabel>
        </div>
        <div class="card">
          <div class="flex justify-content-between">
            <h3>Links</h3>
            <p-button label="Add Link" (click)="addLink()"/>
          </div>
          <p-table
            id="linktable"
            [value]="links"
            [tableStyle]="{ 'min-width': '50rem' }"
          >
            <ng-template pTemplate="header">
              <tr>
                <th>Name</th>
                <th>Url</th>
                <th>Delete Link</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-link let-rowIndex="rowIndex">
              <tr>
                <td><input pInputText [(ngModel)]="links[rowIndex].name" [ngClass]="{'error': !links[rowIndex].name}"/></td>
                <td><input pInputText [(ngModel)]="links[rowIndex].url" [ngClass]="{'error': !links[rowIndex].url}"/></td>
                <td><p-button icon="pi pi-trash" (click)="removeLink(rowIndex)" severity="danger"></p-button></td>
              </tr>
            </ng-template>
          </p-table>
        </div>
        <div class="card">
          <div class="flex justify-content-between">
            <h3>Media</h3>
            <p-toast />
            <p-fileUpload
              mode="basic"
              name="demo[]"
              chooseIcon="pi pi-upload"
              url="https://www.primefaces.org/cdn/api/upload.php"
              maxFileSize="1000000"
              (onUpload)="uploadFile($event)"
              [auto]="true"
              chooseLabel="Upload File" />
          </div>
          <p-table
            id="mediatable"
            [value]="media"
            [tableStyle]="{ 'min-width': '50rem' }"
          >
            <ng-template  pTemplate="header">
              <tr>
                <th>Name</th>
                <th>Download File</th>
<!--                <th>Change File</th>-->
                <th>Delete File</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
              <tr>
<!--                <td><input pInputText [(ngModel)]="media[rowIndex].path" [ngClass]="{'error': !media[rowIndex].name}" /></td>
-->            <td><h5>{{media[rowIndex].path}}</h5></td>
                <td>
                  <p-button (onClick)="downloadDocument(media[rowIndex].mediaId)" label="Download" icon="pi pi-download"/>
                </td>
<!--                <td>-->
<!--                  <p-fileUpload-->
<!--                    mode="basic"-->
<!--                    chooseLabel="Change"-->
<!--                    chooseIcon="pi pi-sync"-->
<!--                    name="demo[]"-->
<!--                    url="https://www.primefaces.org/cdn/api/upload.php"-->
<!--                    maxFileSize="1000000"-->
<!--                    (onUpload)="onBasicUploadAuto($event)"-->
<!--                  />-->
<!--                </td>-->
                <td><p-button (click)="removeMedia(rowIndex)" severity="danger" icon="pi pi-trash" /></td>
              </tr>
            </ng-template>
            <ng-template pTemplate="summary">
              <div class="flex align-items-center justify-content-between font-normal text-sm">
                  *Maximum file size is 10MB
              </div>
          </ng-template>
          </p-table>
        </div>
        <div class="card">
          <div class="flex justify-content-end">
            <p-button label="Cancel" class="p-button-secondary" severity="danger" (click)="cancel()"></p-button>
            <a [routerLink]="['/project-detail', project.projectId]">
            <button
                id="saveButton"
                pButton
                pRipple
                label="Save"
                class="p-button-success"
                type="submit"
                (click)="saveProject()">
            </button>
            </a>
          </div>
        </div>
      </div>
      <div class="col-2"></div>
    </div>
  </body>
</html>
